<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Quizzes â€” EXCELlent AccounTax</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
  <style>
    /* Sticky tab bar */
    .topbar {
      position: sticky;
      top: 0;
      z-index: 1000;
      background: #fff;
      border-bottom: 1px solid #ccc;
    }
    .tabs {
      display: flex;
      gap: 1rem;
      padding: 0.5rem 1rem;
    }
    .tab {
      text-decoration: none;
      color: #333;
      padding: 0.25rem 0.5rem;
    }
    .tab.active {
      font-weight: bold;
      border-bottom: 2px solid #0078d4;
    }

    /* Sticky action bar */
    .actionbar {
      position: sticky;
      top: 2.5rem; /* height of topbar */
      z-index: 999;
      background: #f9f9f9;
      border-bottom: 1px solid #ccc;
      padding: 0.5rem 1rem;
    }
    .actionbar-inner {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      align-items: flex-end;
    }
    .select label {
      display: block;
      font-size: 0.85rem;
      margin-bottom: 0.25rem;
    }
    .select select {
      min-width: 150px;
    }
    .actions {
      display: flex;
      gap: 0.5rem;
    }
    .btn {
      padding: 0.4rem 0.8rem;
      cursor: pointer;
    }
    .btn[disabled] {
      opacity: 0.5;
      cursor: not-allowed;
    }

    /* Content area */
    .container {
      padding: 1rem;
    }
    .section-heading {
      margin-top: 1.5rem;
      border-bottom: 1px solid #ccc;
      padding-bottom: 0.25rem;
    }
    .q {
      border: 1px solid #ddd;
      padding: 0.75rem;
      margin-top: 1rem;
      border-radius: 4px;
      background: #fff;
    }
    .q-meta {
      font-size: 0.85rem;
      color: #666;
      margin-bottom: 0.25rem;
    }
    .choices {
      margin-top: 0.5rem;
    }
    .choice {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.25rem;
    }
    .letter {
      font-weight: bold;
    }
    .feedback.correct {
      color: green;
    }
    .feedback.incorrect {
      color: red;
    }
    .feedback.hidden,
    .reveals.hidden {
      display: none;
    }
    .scoreboard {
      margin-top: 1.5rem;
      padding: 0.75rem;
      border: 1px solid #ccc;
      background: #f0f0f0;
      display: flex;
      gap: 2rem;
    }
    .scoreboard.hidden {
      display: none;
    }
    .score label {
      display: block;
      font-size: 0.85rem;
      color: #555;
    }
    .score strong {
      font-size: 1.2rem;
    }
  </style>
</head>
<body>

<header class="topbar" role="navigation" aria-label="Primary">
  <nav class="tabs">
    <a class="tab" href="#home" data-tab="home">Home</a>
    <a class="tab" href="#glossary" data-tab="glossary">Glossary</a>
    <a class="tab active" href="#quizzes" data-tab="quizzes">Quizzes</a>
    <a class="tab" href="#references" data-tab="references">References</a>
    <a class="tab" href="#visuals" data-tab="visuals">Visuals</a>
    <a class="tab" href="#tools" data-tab="tools">Tools</a>
  </nav>
</header>

<div class="actionbar" role="region" aria-label="Quiz filters and actions">
  <div class="actionbar-inner">
    <div class="select">
      <label for="volume">Volume</label>
      <select id="volume">
        <option value="">Select volume</option>
        <option value="1">Volume 1</option>
        <option value="2">Volume 2</option>
        <option value="3">Volume 3</option>
      </select>
    </div>

    <div class="select">
      <label for="chapter">Chapter</label>
      <select id="chapter" disabled>
        <option value="">Select chapter</option>
      </select>
    </div>

    <div class="select">
      <label for="topic">Topic</label>
      <select id="topic" disabled>
        <option value="">Select topic</option>
      </select>
    </div>

    <div class="select">
      <label for="qtype">Question type</label>
      <select id="qtype" disabled>
        <option value="">Select type</option>
        <option value="theory">Theory</option>
        <option value="practice">Practice</option>
        <option value="both">Both</option>
      </select>
    </div>

    <div class="actions">
      <button id="submitBtn" class="btn primary" disabled>Submit</button>
      <button id="resetBtn" class="btn secondary" disabled>Reset</button>
    </div>
  </div>
</div>

<main class="container">
  <section id="quizzesPanel" class="panel">
    <p class="filters-note">
      Use the selectors above to load questions. Tabs and controls remain clickable even when you scroll.
    </p>

    <div id="content"></div>

    <div id="scoreboard" class="scoreboard hidden" aria-live="polite">
      <div class="score">
        <label>Raw score</label>
        <strong id="rawScore">0 / 0</strong>
      </div>
      <div class="score">
        <label>Percentage</label>
        <strong id="pctScore">0%</strong>
      </div>
    </div>
  </section>
</main>

<script>
// ==========================
// State & Elements
// ==========================
const state = {
  volume: "",
  chapter: "",
  topic: "",
  qtype: "",
  submitted: false
};

const volumeSel = document.getElementById('volume');
const chapterSel = document.getElementById('chapter');
const topicSel = document.getElementById('topic');
const qtypeSel = document.getElementById('qtype');
const contentEl = document.getElementById('content');
const submitBtn = document.getElementById('submitBtn');
const resetBtn = document.getElementById('resetBtn');
const scoreboard = document.getElementById('scoreboard');
const rawScoreEl = document.getElementById('rawScore');
const pctScoreEl = document.getElementById('pctScore');

// ==========================
// Tab activation
// ==========================
function activateTab(name){
  document.querySelectorAll('.tab').forEach(a=>{
    a.classList.toggle('active', a.dataset.tab === name);
  });
}
document.querySelectorAll('.tab').forEach(tab=>{
  tab.addEventListener('click', e=>{
    e.preventDefault();
    activateTab(tab.dataset.tab);
  });
});

// ==========================
// UI helpers
// ==========================
function clearUI(){
  state.submitted = false;
  contentEl.innerHTML = '';
  scoreboard.classList.add('hidden');
  rawScoreEl.textContent = '0 / 0';
  pctScoreEl.textContent = '0%';
}
</script>

<script>
// ==========================
// Data (Batch 2)
// ==========================
const DATA = {
  volumes: {
    "1": {
      label: "Volume 1",
      chapters: {
        "1": {
          label: "Cash and Cash Equivalents",
          topics: {
            "1.1": {
              label: "Cash and Cash Equivalents",
              theory: [
                {
                  id: "V1C1T1Q1",
                  stem: "Which of the following is considered cash?",
                  choices: [
                    "Postdated checks",
                    "Money orders",
                    "NSF checks",
                    "IOUs"
                  ],
                  correctIndex: 1
                },
                {
                  id: "V1C1T1Q2",
                  stem: "Which of the following is NOT considered cash equivalent?",
                  choices: [
                    "Treasury bills purchased three months before maturity",
                    "Commercial paper purchased two months before maturity",
                    "Money market instruments purchased one month before maturity",
                    "Equity securities purchased one month before maturity"
                  ],
                  correctIndex: 3
                },
                {
                  id: "V1C1T1Q3",
                  stem: "Cash equivalents are held for the purpose of:",
                  choices: [
                    "Meeting short-term cash commitments",
                    "Speculative investment",
                    "Long-term investment",
                    "Earning interest income"
                  ],
                  correctIndex: 0
                },
                {
                  id: "V1C1T1Q4",
                  stem: "Which of the following is NOT part of cash on hand?",
                  choices: [
                    "Customer's postdated checks",
                    "Undeposited cash collections",
                    "Petty cash fund",
                    "Cashier's checks"
                  ],
                  correctIndex: 0
                },
                {
                  id: "V1C1T1Q5",
                  stem: "Which of the following is NOT part of cash in bank?",
                  choices: [
                    "Savings account",
                    "Current account",
                    "Time deposit maturing in 30 days",
                    "Time deposit maturing in 120 days"
                  ],
                  correctIndex: 3
                },
                {
                  id: "V1C1T1Q6",
                  stem: "Which of the following is NOT considered cash equivalent?",
                  choices: [
                    "Treasury bills purchased one month before maturity",
                    "Commercial paper purchased two months before maturity",
                    "Money market instruments purchased three months before maturity",
                    "Equity securities purchased two months before maturity"
                  ],
                  correctIndex: 3
                },
                {
                  id: "V1C1T1Q7",
                  stem: "Which of the following is NOT considered cash?",
                  choices: [
                    "Traveler's checks",
                    "Money orders",
                    "Postdated checks",
                    "Demand deposits"
                  ],
                  correctIndex: 2
                },
                {
                  id: "V1C1T1Q8",
                  stem: "Which of the following is NOT considered cash equivalent?",
                  choices: [
                    "Treasury bills purchased two months before maturity",
                    "Commercial paper purchased one month before maturity",
                    "Money market instruments purchased three months before maturity",
                    "Equity securities purchased three months before maturity"
                  ],
                  correctIndex: 3
                },
                {
                  id: "V1C1T1Q9",
                  stem: "Which of the following is NOT part of cash?",
                  choices: [
                    "Cash on hand",
                    "Cash in bank",
                    "Postdated checks",
                    "Cash equivalents"
                  ],
                  correctIndex: 2
                },
                {
                  id: "V1C1T1Q10",
                  stem: "Which of the following is NOT considered cash equivalent?",
                  choices: [
                    "Treasury bills purchased three months before maturity",
                    "Commercial paper purchased two months before maturity",
                    "Money market instruments purchased one month before maturity",
                    "Equity securities purchased one month before maturity"
                  ],
                  correctIndex: 3
                }
              ],
              practice: [
                {
                  id: "V1C1P1Q1",
                  stem: "From the following data, compute the adjusted cash balance.",
                  choices: [
                    "â‚±1,500,000",
                    "â‚±1,600,000",
                    "â‚±1,700,000",
                    "â‚±1,800,000"
                  ],
                  correctIndex: 1,
                  questionImage: "images/IntaccV1C01CashAndCashEquivalentsPrQ1.png",
                  answerImage: "images/IntaccV1C01CashAndCashEquivalentsPrA1.png"
                },
                {
                  id: "V1C1P1Q2",
                  stem: "From the following data, compute the adjusted book balance.",
                  choices: [
                    "â‚±2,499,800",
                    "â‚±2,500,000",
                    "â‚±2,500,200",
                    "â‚±2,500,400"
                  ],
                  correctIndex: 0,
                  questionImage: "images/IntaccV1C01CashAndCashEquivalentsPrQ2.png",
                  answerImage: "images/IntaccV1C01CashAndCashEquivalentsPrA2.png"
                },
                {
                  id: "V1C1P1Q3",
                  stem: "From the following data, compute the adjusted bank balance.",
                  choices: [
                    "â‚±2,500,000",
                    "â‚±2,513,000",
                    "â‚±2,487,000",
                    "â‚±2,526,000"
                  ],
                  correctIndex: 0,
                  questionImage: "images/IntaccV1C01CashAndCashEquivalentsPrQ3.png",
                  answerImage: "images/IntaccV1C01CashAndCashEquivalentsPrA3.png"
                },
                {
                  id: "V1C1P1Q4",
                  stem: "From the following data, compute the closing outstanding deposits.",
                  choices: [
                    "â‚±898,700",
                    "â‚±900,000",
                    "â‚±913,000",
                    "â‚±920,000"
                  ],
                  correctIndex: 0,
                  questionImage: "images/IntaccV1C01CashAndCashEquivalentsPrQ4.png",
                  answerImage: "images/IntaccV1C01CashAndCashEquivalentsPrA4.png"
                },
                {
                  id: "V1C1P1Q5",
                  stem: "From the following data, compute the opening outstanding checks.",
                  choices: [
                    "â‚±11,000",
                    "â‚±13,000",
                    "â‚±15,000",
                    "â‚±16,000"
                  ],
                  correctIndex: 0,
                  questionImage: "images/IntaccV1C01CashAndCashEquivalentsPrQ5.png",
                  answerImage: "images/IntaccV1C01CashAndCashEquivalentsPrA5.png"
                }
              ]
            }
          }
        },
        "2": {
          label: "Financial Assets",
          topics: {
            "2.10": {
              label: "Definition, Recognition, Measurement, Impairment",

theory: [
  // ===== 15 from Definition and Classification of Financial Assets =====
  {
    id: "V1C2T2.10Q1",
    stem: "Which of the following is a financial asset?",
    choices: [
      "Inventories",
      "Prepaid expenses",
      "Equity instrument of another entity",
      "Property, plant and equipment"
    ],
    correctIndex: 2
  },
  {
    id: "V1C2T2.10Q2",
    stem: "Which of the following is NOT a financial asset?",
    choices: [
      "Cash",
      "Trade receivables",
      "Investment in bonds",
      "Investment in own shares"
    ],
    correctIndex: 3
  },
  {
    id: "V1C2T2.10Q3",
    stem: "Which of the following is a contractual right to receive cash or another financial asset?",
    choices: [
      "Loan receivable",
      "Inventory",
      "Prepaid rent",
      "Property, plant and equipment"
    ],
    correctIndex: 0
  },
  {
    id: "V1C2T2.10Q4",
    stem: "Which of the following is NOT a contractual right to receive cash or another financial asset?",
    choices: [
      "Trade receivable",
      "Cash",
      "Prepaid insurance",
      "Investment in debt securities"
    ],
    correctIndex: 2
  },
  {
    id: "V1C2T2.10Q5",
    stem: "Which of the following is a financial asset classified as equity instrument?",
    choices: [
      "Ordinary shares of another entity",
      "Preference shares of the same entity",
      "Treasury shares",
      "Redeemable preference shares issued by the entity"
    ],
    correctIndex: 0
  },
  {
    id: "V1C2T2.10Q6",
    stem: "Which of the following is NOT a financial asset?",
    choices: [
      "Cash equivalents",
      "Trade receivables",
      "Investment in own bonds",
      "Investment in bonds of another entity"
    ],
    correctIndex: 2
  },
  {
    id: "V1C2T2.10Q7",
    stem: "Which of the following is a financial asset?",
    choices: [
      "Cash",
      "Inventory",
      "Prepaid expenses",
      "Property, plant and equipment"
    ],
    correctIndex: 0
  },
  {
    id: "V1C2T2.10Q8",
    stem: "Which of the following is NOT a financial asset?",
    choices: [
      "Cash",
      "Trade receivable",
      "Investment in debt securities",
      "Investment in own shares"
    ],
    correctIndex: 3
  },
  {
    id: "V1C2T2.10Q9",
    stem: "Which of the following is a contractual right to receive cash?",
    choices: [
      "Loan receivable",
      "Inventory",
      "Prepaid rent",
      "Property, plant and equipment"
    ],
    correctIndex: 0
  },
  {
    id: "V1C2T2.10Q10",
    stem: "Which of the following is NOT a contractual right to receive cash?",
    choices: [
      "Trade receivable",
      "Cash",
      "Prepaid insurance",
      "Investment in debt securities"
    ],
    correctIndex: 2
  },
  {
    id: "V1C2T2.10Q11",
    stem: "Which of the following is a financial asset classified as equity instrument?",
    choices: [
      "Ordinary shares of another entity",
      "Preference shares of the same entity",
      "Treasury shares",
      "Redeemable preference shares issued by the entity"
    ],
    correctIndex: 0
  },
  {
    id: "V1C2T2.10Q12",
    stem: "Which of the following is NOT a financial asset?",
    choices: [
      "Cash equivalents",
      "Trade receivables",
      "Investment in own bonds",
      "Investment in bonds of another entity"
    ],
    correctIndex: 2
  },
  {
    id: "V1C2T2.10Q13",
    stem: "Which of the following is a financial asset?",
    choices: [
      "Cash",
      "Inventory",
      "Prepaid expenses",
      "Property, plant and equipment"
    ],
    correctIndex: 0
  },
  {
    id: "V1C2T2.10Q14",
    stem: "Which of the following is NOT a financial asset?",
    choices: [
      "Cash",
      "Trade receivable",
      "Investment in debt securities",
      "Investment in own shares"
    ],
    correctIndex: 3
  },
  {
    id: "V1C2T2.10Q15",
    stem: "Which of the following is a contractual right to receive cash?",
    choices: [
      "Loan receivable",
      "Inventory",
      "Prepaid rent",
      "Property, plant and equipment"
    ],
    correctIndex: 0
  },

  // ===== 5 from Recognition and Initial Measurement =====
  {
    id: "V1C2T2.10Q16",
    stem: "When is a financial asset recognized?",
    choices: [
      "When the entity becomes a party to the contractual provisions",
      "When cash is received",
      "When the asset is delivered",
      "When the contract is signed"
    ],
    correctIndex: 0
  },
  {
    id: "V1C2T2.10Q17",
    stem: "At initial recognition, a financial asset is measured at:",
    choices: [
      "Fair value",
      "Cost",
      "Nominal value",
      "Amortized cost"
    ],
    correctIndex: 0
  },
  {
    id: "V1C2T2.10Q18",
    stem: "Transaction costs are included in the initial measurement of a financial asset unless:",
    choices: [
      "The asset is measured at fair value through profit or loss",
      "The asset is measured at amortized cost",
      "The asset is measured at fair value through other comprehensive income",
      "The asset is an equity instrument"
    ],
    correctIndex: 0
  },
  {
    id: "V1C2T2.10Q19",
    stem: "Which of the following is NOT included in transaction costs?",
    choices: [
      "Fees and commissions paid to agents",
      "Levies by regulatory agencies",
      "Transfer taxes and duties",
      "Financing costs"
    ],
    correctIndex: 3
  },
  {
    id: "V1C2T2.10Q20",
    stem: "Which of the following is included in transaction costs?",
    choices: [
      "Interest expense",
      "Commissions paid to brokers",
      "Dividend payments",
      "Foreign exchange losses"
    ],
    correctIndex: 1
  },

  // ===== 15 from Subsequent Measurement =====
  {
    id: "V1C2T2.10Q21",
    stem: "Which of the following is a category of financial assets under PFRS 9?",
    choices: [
      "Held-to-maturity",
      "Loans and receivables",
      "Fair value through profit or loss",
      "Available-for-sale"
    ],
    correctIndex: 2
  },
  {
    id: "V1C2T2.10Q22",
    stem: "Debt instruments can be measured at amortized cost if:",
    choices: [
      "The business model is to hold assets to collect contractual cash flows",
      "The contractual terms give rise to cash flows that are solely payments of principal and interest",
      "Both A and B",
      "Neither A nor B"
    ],
    correctIndex: 2
  },
  {
    id: "V1C2T2.10Q23",
    stem: "Equity instruments are generally measured at:",
    choices: [
      "Amortized cost",
      "Fair value through profit or loss",
      "Cost",
      "Nominal value"
    ],
    correctIndex: 1
  },
  {
    id: "V1C2T2.10Q24",
    stem: "A debt instrument is measured at fair value through other comprehensive income if:",
    choices: [
      "The business model is to hold assets to collect contractual cash flows and to sell",
      "The contractual terms give rise to cash flows that are solely payments of principal and interest",
      "Both A and B",
      "Neither A nor B"
    ],
    correctIndex: 2
  },
  {
    id: "V1C2T2.10Q25",
    stem: "Which of the following is NOT a category of financial assets under PFRS 9?",
    choices: [
      "Fair value through profit or loss",
      "Fair value through other comprehensive income",
      "Amortized cost",
      "Held-to-maturity"
    ],
    correctIndex: 3
  },
  {
    id: "V1C2T2.10Q26",
    stem: "Debt instruments measured at amortized cost are subject to:",
    choices: [
      "Fair value changes recognized in profit or loss",
      "Fair value changes recognized in other comprehensive income",
      "Effective interest method amortization",
      "No subsequent measurement"
    ],
    correctIndex: 2
  },
  {
    id: "V1C2T2.10Q27",
    stem: "Equity instruments designated at fair value through other comprehensive income:",
    choices: [
      "Have fair value changes recognized in profit or loss",
      "Have fair value changes recognized in other comprehensive income",
      "Are measured at amortized cost",
      "Are not remeasured after initial recognition"
    ],
    correctIndex: 1
  },
  {
    id: "V1C2T2.10Q28",
    stem: "Which of the following is measured at fair value through profit or loss by default?",
    choices: [
      "Equity instruments",
      "Debt instruments held to collect contractual cash flows",
      "Debt instruments held to collect and sell",
      "Loans receivable"
    ],
    correctIndex: 0
  },
  {
    id: "V1C2T2.10Q29",
    stem: "The effective interest method is used for:",
    choices: [
      "Amortized cost measurement",
      "Fair value through profit or loss measurement",
      "Fair value through other comprehensive income measurement",
      "All of the above"
    ],
    correctIndex: 0
  },
  {
    id: "V1C2T2.10Q30",
    stem: "Which of the following is NOT true about amortized cost measurement?",
    choices: [
      "It uses the effective interest method",
      "It recognizes interest income in profit or loss",
      "It recognizes fair value changes in other comprehensive income",
      "It is applied to certain debt instruments"
    ],
    correctIndex: 2
  },
  {
    id: "V1C2T2.10Q31",
    stem: "Fair value changes of debt instruments measured at FVOCI are recognized in:",
    choices: [
      "Profit or loss",
      "Other comprehensive income",
      "Both profit or loss and other comprehensive income",
      "Neither profit or loss nor other comprehensive income"
    ],
    correctIndex: 1
  },
  {
    id: "V1C2T2.10Q32",
    stem: "Interest income from debt instruments measured at FVOCI is recognized in:",
    choices: [
      "Profit or loss",
      "Other comprehensive income",
      "Both profit or loss and other comprehensive income",
      "Neither profit or loss nor other comprehensive income"
    ],
    correctIndex: 0
  },
  {
    id: "V1C2T2.10Q33",
    stem: "Dividends from equity instruments measured at FVOCI are recognized in:",
    choices: [
      "Profit or loss",
      "Other comprehensive income",
      "Both profit or loss and other comprehensive income",
      "Neither profit or loss nor other comprehensive income"
    ],
    correctIndex: 0
  },
  {
    id: "V1C2T2.10Q34",
    stem: "Which of the following is NOT true about equity instruments designated at FVOCI?",
    choices: [
      "Fair value changes are recognized in other comprehensive income",
      "Dividends are recognized in profit or loss",
      "Gains or losses on disposal are reclassified to profit or loss",
      "They are measured at fair value"
    ],
    correctIndex: 2
  },
  {
    id: "V1C2T2.10Q35",
    stem: "Which of the following is measured at amortized cost?",
    choices: [
      "Trade receivables",
      "Equity instruments",
      "Debt instruments held for trading",
      "Derivatives"
    ],
    correctIndex: 0
  },

  // ===== 20 from Impairment, Financing, Associates, and Joint Ventures =====
  {
    id: "V1C2T2.10Q36",
    stem: "Under the expected credit loss model, impairment is recognized for:",
    choices: [
      "All financial assets measured at amortized cost",
      "All financial assets measured at FVOCI",
      "Loan commitments and financial guarantee contracts",
      "All of the above"
    ],
    correctIndex: 3
  },
  {
    id: "V1C2T2.10Q37",
    stem: "Expected credit losses are:",
    choices: [
      "Probability-weighted amounts",
      "Discounted to present value",
      "Based on reasonable and supportable information",
      "All of the above"
    ],
    correctIndex: 3
  },
  {
    id: "V1C2T2.10Q38",
    stem: "12-month expected credit losses are:",
    choices: [
      "Losses from default events possible within 12 months",
      "Losses from all possible default events over the life of the asset",
      "Losses recognized only when default occurs",
      "Losses recognized only when there is objective evidence of impairment"
    ],
    correctIndex: 0
  },
  {
    id: "V1C2T2.10Q39",
    stem: "Lifetime expected credit losses are:",
    choices: [
      "Losses from default events possible within 12 months",
      "Losses from all possible default events over the life of the asset",
      "Losses recognized only when default occurs",
      "Losses recognized only when there is objective evidence of impairment"
    ],
    correctIndex: 1
  },
  {
    id: "V1C2T2.10Q40",
    stem: "Which of the following is NOT subject to the expected credit loss model?",
    choices: [
      "Trade receivables",
      "Debt instruments at amortized cost",
      "Equity instruments",
      "Debt instruments at FVOCI"
    ],
    correctIndex: 2
  },
  {
    id: "V1C2T2.10Q41",
    stem: "For trade receivables without a significant financing component, entities may:",
    choices: [
      "Apply the simplified approach",
      "Apply the general approach",
      "Apply either approach",
      "Not recognize impairment"
    ],
    correctIndex: 0
  },
  {
    id: "V1C2T2.10Q42",
    stem: "Under the simplified approach, entities recognize:",
    choices: [
      "12-month expected credit losses",
      "Lifetime expected credit losses",
      "Losses only when default occurs",
      "Losses only when there is objective evidence of impairment"
    ],
    correctIndex: 1
  },
  {
    id: "V1C2T2.10Q43",
    stem: "Which of the following is NOT a financial asset subject to impairment?",
    choices: [
      "Loan receivable",
      "Trade receivable",
      "Equity instrument",
      "Debt instrument at amortized cost"
    ],
    correctIndex: 2
  },
  {
    id: "V1C2T2.10Q44",
    stem: "Which of the following is a financial asset subject to impairment?",
    choices: [
      "Equity instrument",
      "Loan receivable",
      "Investment in associate",
      "Investment in joint venture"
    ],
    correctIndex: 1
  },
  {
    id: "V1C2T2.10Q45",
    stem: "Investments in associates are accounted for using:",
    choices: [
      "Cost method",
      "Equity method",
      "Fair value method",
      "Amortized cost method"
    ],
    correctIndex: 1
  },
  {
    id: "V1C2T2.10Q46",
    stem: "Investments in joint ventures are accounted for using:",
    choices: [
      "Cost method",
      "Equity method",
      "Fair value method",
      "Amortized cost method"
    ],
    correctIndex: 1
  },
  {
    id: "V1C2T2.10Q47",
    stem: "Under the equity method, the investment in associate is initially recognized at:",
    choices: [
      "Cost",
      "Fair value",
      "Amortized cost",
      "Nominal value"
    ],
    correctIndex: 0
  },
  {
    id: "V1C2T2.10Q48",
    stem: "Under the equity method, the investor recognizes its share of the investeeâ€™s:",
    choices: [
      "Profit or loss",
      "Other comprehensive income",
      "Both profit or loss and other comprehensive income",
      "Neither profit or loss nor other comprehensive income"
    ],
    correctIndex: 2
  },
  {
    id: "V1C2T2.10Q49",
    stem: "Which of the following decreases the carrying amount of an investment under the equity method?",
    choices: [
      "Investorâ€™s share of investeeâ€™s profit",
      "Dividends received from investee",
      "Investorâ€™s share of investeeâ€™s other comprehensive income",
      "Additional investment made by investor"
    ],
    correctIndex: 1
  },
  {
    id: "V1C2T2.10Q50",
    stem: "Which of the following increases the carrying amount of an investment under the equity method?",
    choices: [
      "Dividends received from investee",
      "Investorâ€™s share of investeeâ€™s loss",
      "Investorâ€™s share of investeeâ€™s profit",
      "Disposal of part of the investment"
    ],
    correctIndex: 2
  },
  {
    id: "V1C2T2.10Q51",
    stem: "When significant influence is lost, the investment in associate is:",
    choices: [
      "Continued to be accounted for under the equity method",
      "Measured at fair value through profit or loss",
      "Measured at amortized cost",
      "Derecognized"
    ],
    correctIndex: 1
  },
  {
    id: "V1C2T2.10Q52",
    stem: "Significant influence is presumed when the investor holds:",
    choices: [
      "10% or more of the voting power",
      "20% or more of the voting power",
      "30% or more of the voting power",
      "50% or more of the voting power"
    ],
    correctIndex: 1
  },
  {
    id: "V1C2T2.10Q53",
    stem: "Joint control exists when decisions about relevant activities require:",
    choices: [
      "Unanimous consent of all parties sharing control",
      "Majority vote of the parties",
      "Consent of the largest investor",
      "Consent of any one investor"
    ],
    correctIndex: 0
  },
  {
    id: "V1C2T2.10Q54",
    stem: "Which of the following is NOT a joint arrangement under PFRS 11?",
    choices: [
      "Joint operation",
      "Joint venture",
      "Jointly controlled asset",
      "Jointly controlled entity"
    ],
    correctIndex: 2
  },
  {
    id: "V1C2T2.10Q55",
    stem: "In a joint operation, a party recognizes:",
    choices: [
      "Its share of assets, liabilities, revenues, and expenses",
      "An investment accounted for under the equity method",
      "Only its share of profit or loss",
      "Only its share of assets and liabilities"
    ],
    correctIndex: 0
  }
],

practice: [
  // ===== 5 from Recognition and Initial Measurement =====
  {
    id: "V1C2T2.10P1Q1",
    stem: "From the following data, compute the initial carrying amount of the financial asset.",
    choices: [
      "â‚±1,246,000",
      "â‚±1,300,000",
      "â‚±1,430,000",
      "â‚±1,446,000"
    ],
    correctIndex: 0,
    questionImage: "images/IntaccV1C02RecognitionAndInitialMeasurementOfFinancialAssetsPrQ1.png",
    answerImage: "images/IntaccV1C02RecognitionAndInitialMeasurementOfFinancialAssetsPrA1.png"
  },
  {
    id: "V1C2T2.10P1Q2",
    stem: "From the following data, compute the total transaction costs.",
    choices: [
      "â‚±130,000",
      "â‚±146,000",
      "â‚±160,000",
      "â‚±176,000"
    ],
    correctIndex: 1,
    questionImage: "images/IntaccV1C02RecognitionAndInitialMeasurementOfFinancialAssetsPrQ2.png",
    answerImage: "images/IntaccV1C02RecognitionAndInitialMeasurementOfFinancialAssetsPrA2.png"
  },
  {
    id: "V1C2T2.10P1Q3",
    stem: "From the following data, compute the fair value of the financial asset.",
    choices: [
      "â‚±1,100,000",
      "â‚±1,200,000",
      "â‚±1,300,000",
      "â‚±1,600,000"
    ],
    correctIndex: 2,
    questionImage: "images/IntaccV1C02RecognitionAndInitialMeasurementOfFinancialAssetsPrQ3.png",
    answerImage: "images/IntaccV1C02RecognitionAndInitialMeasurementOfFinancialAssetsPrA3.png"
  },
  {
    id: "V1C2T2.10P1Q4",
    stem: "From the following data, compute the total consideration paid.",
    choices: [
      "â‚±1,100,000",
      "â‚±1,230,000",
      "â‚±1,246,000",
      "â‚±1,260,000"
    ],
    correctIndex: 2,
    questionImage: "images/IntaccV1C02RecognitionAndInitialMeasurementOfFinancialAssetsPrQ4.png",
    answerImage: "images/IntaccV1C02RecognitionAndInitialMeasurementOfFinancialAssetsPrA4.png"
  },
  {
    id: "V1C2T2.10P1Q5",
    stem: "From the following data, compute the total acquisition cost of the financial asset.",
    choices: [
      "â‚±1,246,000",
      "â‚±1,300,000",
      "â‚±1,430,000",
      "â‚±1,446,000"
    ],
    correctIndex: 3,
    questionImage: "images/IntaccV1C02RecognitionAndInitialMeasurementOfFinancialAssetsPrQ5.png",
    answerImage: "images/IntaccV1C02RecognitionAndInitialMeasurementOfFinancialAssetsPrA5.png"
  },

  // ===== 5 from Subsequent Measurement =====
  {
    id: "V1C2T2.10P2Q1",
    stem: "From the following data, compute the interest income for Year 1 using the effective interest method.",
    choices: [
      "â‚±139,616.19",
      "â‚±143,802.32",
      "â‚±150,114.58",
      "â‚±245,618.25"
    ],
    correctIndex: 0,
    questionImage: "images/IntaccV1C02SubsequentMeasurementOfFinancialAssetsPrQ1.png",
    answerImage: "images/IntaccV1C02SubsequentMeasurementOfFinancialAssetsPrA1.png"
  },
  {
    id: "V1C2T2.10P2Q2",
    stem: "From the following data, compute the interest income for Year 2 using the effective interest method.",
    choices: [
      "â‚±139,616.19",
      "â‚±143,802.32",
      "â‚±150,114.58",
      "â‚±245,618.25"
    ],
    correctIndex: 1,
    questionImage: "images/IntaccV1C02SubsequentMeasurementOfFinancialAssetsPrQ2.png",
    answerImage: "images/IntaccV1C02SubsequentMeasurementOfFinancialAssetsPrA2.png"
  },
  {
    id: "V1C2T2.10P2Q3",
    stem: "From the following data, compute the interest income for Year 3 using the effective interest method.",
    choices: [
      "â‚±139,616.19",
      "â‚±143,802.32",
      "â‚±150,114.58",
      "â‚±245,618.25"
    ],
    correctIndex: 2,
    questionImage: "images/IntaccV1C02SubsequentMeasurementOfFinancialAssetsPrQ3.png",
    answerImage: "images/IntaccV1C02SubsequentMeasurementOfFinancialAssetsPrA3.png"
  },
  {
    id: "V1C2T2.10P2Q4",
    stem: "From the following data, compute the interest income for Year 4 using the effective interest method.",
    choices: [
      "â‚±139,616.19",
      "â‚±143,802.32",
      "â‚±150,114.58",
      "â‚±245,618.25"
    ],
    correctIndex: 3,
    questionImage: "images/IntaccV1C02SubsequentMeasurementOfFinancialAssetsPrQ4.png",
    answerImage: "images/IntaccV1C02SubsequentMeasurementOfFinancialAssetsPrA4.png"
  },
  {
    id: "V1C2T2.10P2Q5",
    stem: "From the following data, compute the carrying amount of the financial asset at the end of Year 4.",
    choices: [
      "â‚±1,005,616.19",
      "â‚±1,050,818.51",
      "â‚±1,102,333.09",
      "â‚±786,951.34"
    ],
    correctIndex: 3,
    questionImage: "images/IntaccV1C02SubsequentMeasurementOfFinancialAssetsPrQ5.png",
    answerImage: "images/IntaccV1C02SubsequentMeasurementOfFinancialAssetsPrA5.png"
  }
]
            }
          }
        }
      }
    },
    "2": { label: "Volume 2", chapters: {} },
    "3": { label: "Volume 3", chapters: {} }
  }
};
</script>

<script>
// ==========================
// Populate selectors
// ==========================
volumeSel.addEventListener('change', () => {
  state.volume = volumeSel.value;
  chapterSel.innerHTML = '<option value="">Select chapter</option>';
  topicSel.innerHTML = '<option value="">Select topic</option>';
  qtypeSel.value = '';
  chapterSel.disabled = !state.volume;
  topicSel.disabled = true;
  qtypeSel.disabled = true;
  clearUI();

  if (state.volume) {
    const chapters = DATA.volumes[state.volume].chapters;
    Object.keys(chapters).forEach(chKey => {
      const opt = document.createElement('option');
      opt.value = chKey;
      opt.textContent = chapters[chKey].label;
      chapterSel.appendChild(opt);
    });
  }
});

chapterSel.addEventListener('change', () => {
  state.chapter = chapterSel.value;
  topicSel.innerHTML = '<option value="">Select topic</option>';
  qtypeSel.value = '';
  topicSel.disabled = !state.chapter;
  qtypeSel.disabled = true;
  clearUI();

  if (state.chapter) {
    const topics = DATA.volumes[state.volume].chapters[state.chapter].topics;
    Object.keys(topics).forEach(tKey => {
      const opt = document.createElement('option');
      opt.value = tKey;
      opt.textContent = topics[tKey].label;
      topicSel.appendChild(opt);
    });
  }
});

topicSel.addEventListener('change', () => {
  state.topic = topicSel.value;
  qtypeSel.value = '';
  qtypeSel.disabled = !state.topic;
  clearUI();
});

qtypeSel.addEventListener('change', () => {
  state.qtype = qtypeSel.value;
  clearUI();
  if (state.qtype) {
    renderQuestions();
    submitBtn.disabled = false;
    resetBtn.disabled = false;
  } else {
    submitBtn.disabled = true;
    resetBtn.disabled = true;
  }
});

// ==========================
// Render questions
// ==========================
function renderQuestions() {
  const topicObj = DATA.volumes[state.volume].chapters[state.chapter].topics[state.topic];
  let questions = [];

  if (state.qtype === 'theory' || state.qtype === 'both') {
    questions = questions.concat(topicObj.theory);
  }
  if (state.qtype === 'practice' || state.qtype === 'both') {
    questions = questions.concat(topicObj.practice);
  }

  contentEl.innerHTML = '';
  questions.forEach((q, idx) => {
    const qDiv = document.createElement('div');
    qDiv.className = 'q';
    qDiv.dataset.qid = q.id;

    const meta = document.createElement('div');
    meta.className = 'q-meta';
    meta.textContent = `Q${idx + 1}`;
    qDiv.appendChild(meta);

    const stem = document.createElement('div');
    stem.className = 'stem';
    stem.textContent = q.stem;
    qDiv.appendChild(stem);

    if (q.questionImage) {
      const img = document.createElement('img');
      img.src = q.questionImage;
      img.alt = 'Question image';
      img.style.maxWidth = '100%';
      qDiv.appendChild(img);
    }

    const choicesDiv = document.createElement('div');
    choicesDiv.className = 'choices';
    q.choices.forEach((choice, cIdx) => {
      const choiceDiv = document.createElement('label');
      choiceDiv.className = 'choice';
      const radio = document.createElement('input');
      radio.type = 'radio';
      radio.name = q.id;
      radio.value = cIdx;
      const letter = document.createElement('span');
      letter.className = 'letter';
      letter.textContent = String.fromCharCode(65 + cIdx) + '.';
      const text = document.createElement('span');
      text.textContent = choice;
      choiceDiv.appendChild(radio);
      choiceDiv.appendChild(letter);
      choiceDiv.appendChild(text);
      choicesDiv.appendChild(choiceDiv);
    });
    qDiv.appendChild(choicesDiv);

    const feedback = document.createElement('div');
    feedback.className = 'feedback hidden';
    qDiv.appendChild(feedback);

    if (q.answerImage) {
      const reveals = document.createElement('div');
      reveals.className = 'reveals hidden';
      const ansImg = document.createElement('img');
      ansImg.src = q.answerImage;
      ansImg.alt = 'Answer image';
      ansImg.style.maxWidth = '100%';
      reveals.appendChild(ansImg);
      qDiv.appendChild(reveals);
    }

    contentEl.appendChild(qDiv);
  });
}

// ==========================
// Submit & score
// ==========================
submitBtn.addEventListener('click', () => {
  if (state.submitted) return;
  const topicObj = DATA.volumes[state.volume].chapters[state.chapter].topics[state.topic];
  let questions = [];
  if (state.qtype === 'theory' || state.qtype === 'both') {
    questions = questions.concat(topicObj.theory);
  }
  if (state.qtype === 'practice' || state.qtype === 'both') {
    questions = questions.concat(topicObj.practice);
  }

  let score = 0;
  questions.forEach(q => {
    const selected = document.querySelector(`input[name="${q.id}"]:checked`);
    const qDiv = document.querySelector(`.q[data-qid="${q.id}"]`);
    const feedback = qDiv.querySelector('.feedback');
    if (selected) {
      if (parseInt(selected.value, 10) === q.correctIndex) {
        score++;
        feedback.textContent = 'Correct';
        feedback.classList.add('correct');
      } else {
        feedback.textContent = `Incorrect. Correct answer: ${String.fromCharCode(65 + q.correctIndex)}`;
        feedback.classList.add('incorrect');
      }
    } else {
      feedback.textContent = `No answer. Correct answer: ${String.fromCharCode(65 + q.correctIndex)}`;
      feedback.classList.add('incorrect');
    }
    feedback.classList.remove('hidden');

    const reveals = qDiv.querySelector('.reveals');
    if (reveals) reveals.classList.remove('hidden');
  });

  rawScoreEl.textContent = `${score} / ${questions.length}`;
  pctScoreEl.textContent = `${((score / questions.length) * 100).toFixed(0)}%`;
  scoreboard.classList.remove('hidden');
  state.submitted = true;
});

// ==========================
// Reset
// ==========================
resetBtn.addEventListener('click', () => {
  clearUI();
  if (state.qtype) {
    renderQuestions();
  }
});
</script>
</body>
</html>
