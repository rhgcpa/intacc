<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EXCELlent Intermediate Accounting ‚Äì Quizzes</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- üìå Sticky Navigation Tabs -->
  <header id="sticky-header">
    <nav class="tabs">
      <a href="index.html">Home</a>
      <a href="glossary.html">Glossary</a>
      <a href="quizzes.html" class="active">Quizzes</a>
      <a href="references.html">References</a>
      <a href="visuals.html">Visuals</a>
      <a href="tools.html">Tools</a>
    </nav>

    <!-- üîΩ Sticky Filter Controls -->
    <div class="filters">
      <select id="volume"></select>
      <select id="chapter"></select>
      <select id="topic"></select>
      <select id="type"></select>
      <button id="submitBtn">Submit</button>
      <button id="resetBtn">Reset</button>
    </div>
  </header>

  <!-- üìù Quiz Display Section -->
  <main>
    <section id="quizArea">
      <h2>üß† Quiz Questions</h2>
      <div id="questionContainer">Please select filters and click Submit.</div>
      <div id="scoreContainer"></div>
    </section>
  </main>

  <!-- üß† Script Logic -->
  <script>

console.log("‚úÖ quizzes.html script loaded");

    // üîÅ START REPLACEABLE BLOCK: Question Bank
    const questions = [
{
  volume: "Volume 1",
  chapter: "Chapter 1",
  topic: "Cash and Cash Equivalents",
  type: "Theory",
  question: "Cash on hand includes:",
  choices: [
    "Checks dated less than 6 months after today.",
    "Checks dated less than 6 months before today.",
    "Checks dated more than 6 months after today.",
    "Checks dated more than 6 months before today."
  ],
  correct: 1
},
{
  volume: "Volume 1",
  chapter: "Chapter 1",
  topic: "Cash and Cash Equivalents",
  type: "Theory",
  question: "In defining cash equivalents, known maturity value denotes:",
  choices: [
    "Maturity date is determinable on acquisition date.",
    "Maturity value is determinable on acquisition date.",
    "Maturity value will be determined on maturity date.",
    "Maturity value will be known on maturity date."
  ],
  correct: 1
},
{
  volume: "Volume 1",
  chapter: "Chapter 1",
  topic: "Cash and Cash Equivalents",
  type: "Theory",
  question: "Which are excluded from cash equivalents?",
  choices: [
    "Credit cards receivable.",
    "Debit cards receivable.",
    "Time deposits downgraded lower than savings accounts when pre-terminated.",
    "Time deposits downgraded not lower than savings accounts when pre-terminated."
  ],
  correct: 2
},
{
  volume: "Volume 1",
  chapter: "Chapter 1",
  topic: "Cash and Cash Equivalents",
  type: "Theory",
  question: "Which are classified as restricted cash, and presented as noncurrent assets?",
  choices: [
    "Currency usable for at least 12 months after the reporting period.",
    "Currency usable for less than 12 months after the reporting period.",
    "Currency usable for more than 12 months after the reporting period.",
    "Currency usable within 12 months after the reporting period."
  ],
  correct: 0
},
{
  volume: "Volume 1",
  chapter: "Chapter 1",
  topic: "Cash and Cash Equivalents",
  type: "Theory",
  question: "Which are classified as short-term investments, and presented as current assets?",
  choices: [
    "Bank deposits withdrawable with insignificant penalty and usable for less than 12 months.",
    "Bank deposits withdrawable with significant penalty and usable for more than 12 months.",
    "Bank deposits withdrawable with significant penalty and usable within 12 months.",
    "Bank deposits withdrawable without penalty and usable for less than 12 months."
  ],
  correct: 2
},
{
  volume: "Volume 1",
  chapter: "Chapter 1",
  topic: "Cash and Cash Equivalents",
  type: "Theory",
  question: "These describe a bank overdraft, except:",
  choices: [
    "It is allowed only if caused by normal bank changes or other incidental handling fees.",
    "It is disallowed in the Philippines.",
    "It is known as temporary overdrawing in the Philippines.",
    "It is the negative (or overdrawn) balance in a demand deposit account."
  ],
  correct: 1
},
{
  volume: "Volume 1",
  chapter: "Chapter 1",
  topic: "Cash and Cash Equivalents",
  type: "Theory",
  question: "Check withdrawals are recorded as:",
  choices: [
    "Debit to Demand Deposits of depositor entity and credit to Deposit Liabilities of financial institution.",
    "Debit to Demand Deposits of financial institution and credit to Deposit Liabilities of depositor entity.",
    "Debit to Deposit Liabilities of depositor entity and credit to Demand Deposits of financial institution.",
    "Debit to Deposit Liabilities of financial institution and credit to Demand Deposits of depositor entity."
  ],
  correct: 3
},
{
  volume: "Volume 1",
  chapter: "Chapter 1",
  topic: "Cash and Cash Equivalents",
  type: "Theory",
  question: "Timing differences for Deposit Liabilities of financial institution comprise:",
  choices: [
    "Credit memos and debit memos.",
    "Outstanding checks and debit memos.",
    "Outstanding deposits and credit memos.",
    "Outstanding deposits and outstanding checks."
  ],
  correct: 3
},
{
  volume: "Volume 1",
  chapter: "Chapter 1",
  topic: "Cash and Cash Equivalents",
  type: "Theory",
  question: "Which describe debit memos?",
  choices: [
    "They are already credited to Demand Deposits but not yet debited to Deposit Liabilities.",
    "They are already credited to Deposit Liabilities but not yet debited to Demand Deposits.",
    "They are already debited to Demand Deposits but not yet credited to Deposit Liabilities.",
    "They are already debited to Deposit Liabilities but not yet credited to Demand Deposits."
  ],
  correct: 3
},
{
  volume: "Volume 1",
  chapter: "Chapter 1",
  topic: "Cash and Cash Equivalents",
  type: "Theory",
  question: "Before replenishment, the adjusted balance of Petty Cash Fund equals:",
  choices: [
    "Currency in the custody of the Petty Cash Custodian.",
    "Established amount.",
    "Minimum threshold.",
    "Total of Petty Cash Vouchers."
  ],
  correct: 0
},
{
  volume: "Volume 1",
  chapter: "Chapter 1",
  topic: "Cash and Cash Equivalents",
  type: "Practice",
  question: "With these givens, the closing outstanding checks are:",
  imageQuestion: "images/q1.png",
  choices: [
    "289,000.00.",
    "311,000.00.",
    "489,000.00.",
    "511,000.00."
  ],
  correct: 1,
  imageAnswer: "images/a1.png"
},
{
  volume: "Volume 1",
  chapter: "Chapter 1",
  topic: "Cash and Cash Equivalents",
  type: "Practice",
  question: "With these givens, the opening outstanding checks are:",
  imageQuestion: "images/q2.png",
  choices: [
    "289,000.00.",
    "311,000.00.",
    "489,000.00.",
    "511,000.00."
  ],
  correct: 1,
  imageAnswer: "images/a2.png"
},
{
  volume: "Volume 1",
  chapter: "Chapter 1",
  topic: "Cash and Cash Equivalents",
  type: "Practice",
  question: "With these givens, the closing book balance is:",
  imageQuestion: "images/q3.png",
  choices: [
    "2,496,000.00.",
    "2,499,800.00.",
    "2,500,200.00.",
    "2,504,000.00."
  ],
  correct: 1,
  imageAnswer: "images/a3.png"
},
{
  volume: "Volume 1",
  chapter: "Chapter 1",
  topic: "Cash and Cash Equivalents",
  type: "Practice",
  question: "With these givens, the closing outstanding deposits are:",
  imageQuestion: "images/q4.png",
  choices: [
    "487,000.00.",
    "513,000.00.",
    "887,000.00.",
    "913,000.00."
  ],
  correct: 3,
  imageAnswer: "images/a4.png"
},
{
  volume: "Volume 1",
  chapter: "Chapter 1",
  topic: "Cash and Cash Equivalents",
  type: "Practice",
  question: "With these givens, the closing outstanding deposits are:",
  imageQuestion: "images/q5.png",
  choices: [
    "398,700.00.",
    "398,900.00.",
    "898,700.00.",
    "898,900.00."
  ],
  correct: 2,
  imageAnswer: "images/a5.png"
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Definition and Classification of Financial Assets",
  type: "Theory",
  question: "Which of the following is a financial asset?",
  choices: [
    "Prepaid rent",
    "Inventory",
    "Cash",
    "Equipment"
  ],
  correct: 2
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Definition and Classification of Financial Assets",
  type: "Theory",
  question: "Which of the following is not a financial asset?",
  choices: [
    "Accounts receivable",
    "Investment in bonds",
    "Investment in equity securities",
    "Investment in gold"
  ],
  correct: 3
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Definition and Classification of Financial Assets",
  type: "Theory",
  question: "Which of the following is a contractual right?",
  choices: [
    "Right to receive cash",
    "Right to use equipment",
    "Right to consume inventory",
    "Right to occupy a building"
  ],
  correct: 0
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Definition and Classification of Financial Assets",
  type: "Theory",
  question: "Which of the following is a financial liability?",
  choices: [
    "Accounts payable",
    "Unearned revenue",
    "Provision for warranty",
    "Deferred tax liability"
  ],
  correct: 0
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Definition and Classification of Financial Assets",
  type: "Theory",
  question: "Which of the following is not a financial liability?",
  choices: [
    "Notes payable",
    "Accrued expenses",
    "Obligation to deliver goods",
    "Bonds payable"
  ],
  correct: 2
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Definition and Classification of Financial Assets",
  type: "Theory",
  question: "Which of the following is an equity instrument?",
  choices: [
    "Ordinary share",
    "Bond",
    "Note",
    "Loan"
  ],
  correct: 0
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Definition and Classification of Financial Assets",
  type: "Theory",
  question: "Which of the following is not an equity instrument?",
  choices: [
    "Preferred share",
    "Convertible bond",
    "Ordinary share",
    "Share warrant"
  ],
  correct: 1
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Definition and Classification of Financial Assets",
  type: "Theory",
  question: "Which of the following is a derivative?",
  choices: [
    "Forward contract",
    "Investment in equity",
    "Investment in debt",
    "Cash"
  ],
  correct: 0
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Definition and Classification of Financial Assets",
  type: "Theory",
  question: "Which of the following is not a derivative?",
  choices: [
    "Option contract",
    "Swap contract",
    "Forward contract",
    "Investment in property"
  ],
  correct: 3
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Definition and Classification of Financial Assets",
  type: "Theory",
  question: "Which of the following is a financial instrument?",
  choices: [
    "Contract that gives rise to a financial asset of one entity and a financial liability or equity instrument of another entity",
    "Contract that gives rise to a physical asset of one entity and a financial liability of another entity",
    "Contract that gives rise to a financial asset of one entity and a physical asset of another entity",
    "Contract that gives rise to a financial liability of one entity and a physical liability of another entity"
  ],
  correct: 0
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Definition and Classification of Financial Assets",
  type: "Theory",
  question: "Which of the following is not a financial instrument?",
  choices: [
    "Contract to deliver cash",
    "Contract to deliver goods",
    "Contract to receive cash",
    "Contract to issue shares"
  ],
  correct: 1
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Definition and Classification of Financial Assets",
  type: "Theory",
  question: "Which of the following is a financial asset under PFRS 9?",
  choices: [
    "Cash",
    "Inventory",
    "Property, plant and equipment",
    "Prepaid expense"
  ],
  correct: 0
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Definition and Classification of Financial Assets",
  type: "Theory",
  question: "Which of the following is not a financial asset under PFRS 9?",
  choices: [
    "Accounts receivable",
    "Investment in equity securities",
    "Investment in debt securities",
    "Investment in property"
  ],
  correct: 3
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Definition and Classification of Financial Assets",
  type: "Theory",
  question: "Which of the following is a financial liability under PFRS 9?",
  choices: [
    "Accounts payable",
    "Provision for warranty",
    "Deferred tax liability",
    "Unearned revenue"
  ],
  correct: 0
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Definition and Classification of Financial Assets",
  type: "Theory",
  question: "Which of the following is not a financial liability under PFRS 9?",
  choices: [
    "Notes payable",
    "Accrued expenses",
    "Obligation to deliver goods",
    "Bonds payable"
  ],
  correct: 2
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Recognition and Initial Measurement of Financial Assets",
  type: "Theory",
  question: "When the firm order is received, these firm commitments are recognized as financial assets, except:",
  choices: [
    "Those settled net, and are deemed as if they were derivatives.",
    "Those irrevocably designated as measured at FVPL upon initial recognition.",
    "Those designated as hedge items in fair value hedges.",
    "Those to be delivered for ordered goods, or to be rendered for ordered services."
  ],
  correct: 3
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Recognition and Initial Measurement of Financial Assets",
  type: "Theory",
  question: "Under trade date accounting, the regular way transaction is recorded when:",
  choices: [
    "The contract allows settlement beyond the established time frame.",
    "The contract requires net settlement (instead of delivery) of the financial asset.",
    "The entity commits to purchase (or sell) the financial asset.",
    "The financial asset is delivered to (or by) the entity."
  ],
  correct: 2
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Recognition and Initial Measurement of Financial Assets",
  type: "Theory",
  question: "In a regular way purchase under settlement date accounting, the financial asset:",
  choices: [
    "Along with any change in fair value, are recognized on the settlement date based on the classification thereof.",
    "Along with the consideration payable, are recognized on the settlement date.",
    "Is derecognized, and the consideration receivable and any disposal gain (or loss) are recognized on the settlement date.",
    "Is derecognized, and the consideration received and any disposal gain (or loss) are recognized on the settlement date."
  ],
  correct: 0
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Recognition and Initial Measurement of Financial Assets",
  type: "Theory",
  question: "Noninterest-bearing short-term receivables are initially measured at:",
  choices: [
    "Fair value minus fee received (or plus fee paid).",
    "Fair value.",
    "Transaction price.",
    "Undiscounted invoice amount."
  ],
  correct: 3
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Recognition and Initial Measurement of Financial Assets",
  type: "Theory",
  question: "Transaction costs on equity instruments at FVOCI are:",
  choices: [
    "Included in amortized cost, upon initial recognition.",
    "Included in fair value, upon initial recognition.",
    "Recognized in other comprehensive income.",
    "Recognized in profit or loss."
  ],
  correct: 1
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Recognition and Initial Measurement of Financial Assets",
  type: "Practice",
  question: "With these givens, financial assets at FVPL are recognized on April 4 at:",
  imageQuestion: "images/q6.png",
  choices: [
    "0.00.",
    "1,300,000.00.",
    "1,600,000.00.",
    "2,000,000.00."
  ],
  correct: 3,
  imageAnswer: "images/a6.png"
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Recognition and Initial Measurement of Financial Assets",
  type: "Practice",
  question: "With these givens, disposal gain on debt instruments at amortized cost is recognized on March 28 at:",
  imageQuestion: "images/q7.png",
  choices: [
    "0.00.",
    "200,000.00.",
    "300,000.00.",
    "400,000.00."
  ],
  correct: 1,
  imageAnswer: "images/a7.png"
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Recognition and Initial Measurement of Financial Assets",
  type: "Practice",
  question: "With these givens, fair value gain on financial assets at FVPL is recognized on March 28 at:",
  imageQuestion: "images/q8.png",
  choices: [
    "0.00.",
    "200,000.00.",
    "300,000.00.",
    "400,000.00."
  ],
  correct: 1,
  imageAnswer: "images/a8.png"
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Recognition and Initial Measurement of Financial Assets",
  type: "Practice",
  question: "With these givens, disposal gain on debt instruments at FVOCI cost is recognized on April 4 at:",
  imageQuestion: "images/q9.png",
  choices: [
    "0.00.",
    "200,000.00.",
    "300,000.00.",
    "400,000.00."
  ],
  correct: 1,
  imageAnswer: "images/a9.png"
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Recognition and Initial Measurement of Financial Assets",
  type: "Practice",
  question: "With these givens, financial assets at FVPL are initially measured at:",
  imageQuestion: "images/q10.png",
  choices: [
    "1,100,000.00.",
    "1,116,000.00.",
    "1,230,000.00.",
    "1,246,000.00."
  ],
  correct: 0,
  imageAnswer: "images/a10.png"
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Subsequent Measurement of Financial Assets",
  type: "Theory",
  question: "For debt instruments measured at amortized cost, dividend income is:",
  choices: [
    "Not applicable.",
    "Recognized in other comprehensive income, at the amount received (or receivable).",
    "Recognized in profit or loss, at the amount received (or receivable).",
    "Recognized in profit or loss, unless it represents partial recovery of investment cost."
  ],
  correct: 0
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Subsequent Measurement of Financial Assets",
  type: "Theory",
  question: "For equity instruments measured at FVPL, dividend income is:",
  choices: [
    "Not applicable.",
    "Recognized in other comprehensive income, at the amount received (or receivable).",
    "Recognized in profit or loss, at the amount received (or receivable).",
    "Recognized in profit or loss, unless it represents partial recovery of investment cost."
  ],
  correct: 2
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Subsequent Measurement of Financial Assets",
  type: "Theory",
  question: "For debt instruments measured at FVOCI, foreign exchange gain (or loss) is:",
  choices: [
    "Not applicable.",
    "Recognized in other comprehensive income, and reclassified to profit or loss, upon derecognition.",
    "Recognized in other comprehensive income, and reclassified to retained earnings, upon derecognition.",
    "Recognized in profit or loss, at the amount of change in exchange rate."
  ],
  correct: 3
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Subsequent Measurement of Financial Assets",
  type: "Theory",
  question: "For equity instruments measured at FVOCI, foreign exchange gain (or loss) is:",
  choices: [
    "Not applicable.",
    "Recognized in other comprehensive income, and reclassified to profit or loss, upon derecognition.",
    "Recognized in other comprehensive income, and reclassified to retained earnings, upon derecognition.",
    "Recognized in profit or loss, at the amount of change in exchange rate."
  ],
  correct: 2
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Subsequent Measurement of Financial Assets",
  type: "Theory",
  question: "For debt instruments measured at FVPL, impairment gain (or loss) is:",
  choices: [
    "Not applicable.",
    "Recognized in other comprehensive income, and reclassified to profit or loss, upon derecognition.",
    "Recognized in other comprehensive income, and reclassified to retained earnings, upon derecognition.",
    "Recognized in profit or loss, at the amount of change in allowance for expected credit losses."
  ],
  correct: 0
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Subsequent Measurement of Financial Assets",
  type: "Theory",
  question: "For debt instruments measured at amortized cost, fair value gain (or loss) is:",
  choices: [
    "Not applicable.",
    "Recognized in other comprehensive income, and reclassified to profit or loss, upon derecognition.",
    "Recognized in other comprehensive income, and reclassified to retained earnings, upon derecognition.",
    "Recognized in profit or loss, at the amount of change in fair value."
  ],
  correct: 0
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Subsequent Measurement of Financial Assets",
  type: "Theory",
  question: "For equity instruments measured at FVPL, fair value gain (or loss) is:",
  choices: [
    "Not applicable.",
    "Recognized in other comprehensive income, and reclassified to profit or loss, upon derecognition.",
    "Recognized in other comprehensive income, and reclassified to retained earnings, upon derecognition.",
    "Recognized in profit or loss, at the amount of change in fair value."
  ],
  correct: 3
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Subsequent Measurement of Financial Assets",
  type: "Theory",
  question: "Debt instruments measured at FVOCI are measured in the statement of financial position at:",
  choices: [
    "Allowance for expected credit losses.",
    "Amortized cost.",
    "Fair value.",
    "Gross carrying amount."
  ],
  correct: 2
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Subsequent Measurement of Financial Assets",
  type: "Theory",
  question: "Equity instruments measured at FVOCI are measured in the statement of financial position at:",
  choices: [
    "Allowance for expected credit losses.",
    "Amortized cost.",
    "Fair value.",
    "Gross carrying amount."
  ],
  correct: 2
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Subsequent Measurement of Financial Assets",
  type: "Theory",
  question: "If the estimate of expected life cannot be faithfully represented, the EIR will be based on:",
  choices: [
    "Contractual cash flows over contractual term of the debt instrument.",
    "Contractual cash flows over expected life of the debt instrument.",
    "Expected cash flows over contractual term of the debt instrument.",
    "Expected cash flows over expected life of the debt instrument."
  ],
  correct: 0
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Subsequent Measurement of Financial Assets",
  type: "Theory",
  question: "Commitment fees received to originate a loan are recognized as revenue, if:",
  choices: [
    "A specific loan will probably be executed by the entity.",
    "The commitment expires, without a specific loan executed by the entity.",
    "The commitment fees are integral to the effective interest rate.",
    "The loan commitment is not a financial liability measured at FVPL."
  ],
  correct: 1
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Subsequent Measurement of Financial Assets",
  type: "Theory",
  question: "Which fees received are not integral to the effective interest rate?",
  choices: [
    "Commitment fees for a loan that will probably be executed.",
    "Fees received for a loan commitment that is not a financial liability measured at FVPL.",
    "Origination fees received to create (or acquire) a debt instrument.",
    "Syndication fees received to arrange a loan, wherein the entity retains no part of the loan for itself."
  ],
  correct: 3
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Subsequent Measurement of Financial Assets",
  type: "Theory",
  question: "Cost may represent the best estimate of the fair value of equity instruments, if:",
  choices: [
    "The economic environments, wherein the investee operates, significantly changed.",
    "The operating performance of entities, that are comparable to the investee, significantly changed.",
    "The range of possible measurements of the fair value is wide.",
    "The valuation, that is implied by the overall market, significantly changed."
  ],
  correct: 2
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Subsequent Measurement of Financial Assets",
  type: "Theory",
  question: "For reclassification from amortized cost to FVOCI, the effective interest rate:",
  choices: [
    "Ceases to apply, from the initial recognition date.",
    "Ceases to apply, from the reclassification date.",
    "Is determined, as if the reclassification date, were the initial recognition date.",
    "On the reclassification date, equals effective interest rate on the initial recognition date."
  ],
  correct: 3
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Subsequent Measurement of Financial Assets",
  type: "Practice",
  question: "With these givens, the interest revenue for Year 2 is:",
  imageQuestion: "images/q11.png",
  choices: [
    "321,579.26.",
    "341,000.00.",
    "350,603.51.",
    "371,777.08."
  ],
  correct: 2,
  imageAnswer: "images/a11.png"
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Subsequent Measurement of Financial Assets",
  type: "Practice",
  question: "With these givens, the interest revenue for Year 2 is:",
  imageQuestion: "images/q11.png",
  choices: [
    "321,579.26.",
    "341,000.00.",
    "350,603.51.",
    "371,777.08."
  ],
  correct: 2,
  imageAnswer: "images/a11.png"
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Subsequent Measurement of Financial Assets",
  type: "Practice",
  question: "With these givens, the interest revenue for Year 1 is:",
  imageQuestion: "images/q12.png",
  choices: [
    "271,352.64.",
    "300,000.00.",
    "353,848.00.",
    "370,000.00."
  ],
  correct: 0,
  imageAnswer: "images/a12.png"
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Subsequent Measurement of Financial Assets",
  type: "Practice",
  question: "With these givens, the interest revenue for Year 3 is:",
  imageQuestion: "images/q13.png",
  choices: [
    "321,579.26.",
    "341,000.00.",
    "350,603.51.",
    "371,777.08."
  ],
  correct: 2,
  imageAnswer: "images/a13.png"
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Subsequent Measurement of Financial Assets",
  type: "Practice",
  question: "With these givens, the interest revenue for Year 4 is:",
  imageQuestion: "images/q14.png",
  choices: [
    "321,579.26.",
    "341,000.00.",
    "350,603.51.",
    "371,777.08."
  ],
  correct: 3,
  imageAnswer: "images/a14.png"
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Subsequent Measurement of Financial Assets",
  type: "Practice",
  question: "With these givens, the interest revenue for Year 5 is:",
  imageQuestion: "images/q15.png",
  choices: [
    "321,579.26.",
    "341,000.00.",
    "350,603.51.",
    "371,777.08."
  ],
  correct: 1,
  imageAnswer: "images/a15.png"
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Impairment, Financing, Associates, and Joint Ventures",
  type: "Theory",
  question: "If the debt instruments are not credit-impaired on the reporting date, then:",
  choices: [
    "12-month loss allowance is recognized, and interest revenue is based on credit-adjusted EIR.",
    "12-month loss allowance is recognized, and interest revenue is based on EIR.",
    "Lifetime loss allowance is recognized, and interest revenue is based on credit-adjusted EIR.",
    "Lifetime loss allowance is recognized, and interest revenue is based on EIR."
  ],
  correct: 3
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Impairment, Financing, Associates, and Joint Ventures",
  type: "Theory",
  question: "These describe recognition of loss allowance and measurement of interest revenue, except:",
  choices: [
    "12-month loss allowance is recognized, and interest revenue is based on credit-adjusted EIR.",
    "12-month loss allowance is recognized, and interest revenue is based on EIR.",
    "Lifetime loss allowance is recognized, and interest revenue is based on credit-adjusted EIR.",
    "Lifetime loss allowance is recognized, and interest revenue is based on EIR."
  ],
  correct: 0
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Impairment, Financing, Associates, and Joint Ventures",
  type: "Theory",
  question: "If the increase in credit risk since initial recognition of the debt instruments is significant, then:",
  choices: [
    "12-month loss allowance is recognized, with changes thereto recognized in other comprehensive income.",
    "12-month loss allowance is recognized, with changes thereto recognized in profit or loss.",
    "Lifetime loss allowance is recognized, with changes thereto recognized in other comprehensive income.",
    "Lifetime loss allowance is recognized, with changes thereto recognized in profit or loss."
  ],
  correct: 3
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Impairment, Financing, Associates, and Joint Ventures",
  type: "Theory",
  question: "Under the general approach to impairment of debt instruments, interest revenue is measured:",
  choices: [
    "By multiplying the amortized cost, by the credit-adjusted EIR.",
    "By multiplying the amortized cost, by the EIR.",
    "By multiplying the gross carrying amount, by the credit-adjusted EIR.",
    "By multiplying the gross carrying amount, by the EIR."
  ],
  correct: 3
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Impairment, Financing, Associates, and Joint Ventures",
  type: "Theory",
  question: "Under the simplified approach to impairment of debt instruments, interest revenue is measured:",
  choices: [
    "By multiplying the amortized cost, by the credit-adjusted EIR.",
    "By multiplying the amortized cost, by the EIR.",
    "By multiplying the gross carrying amount, by the credit-adjusted EIR.",
    "By multiplying the gross carrying amount, by the EIR."
  ],
  correct: 3
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Impairment, Financing, Associates, and Joint Ventures",
  type: "Theory",
  question: "These describe debt instruments that are credit-impaired on the reporting date, except:",
  choices: [
    "The general approach may be reverted to when credit impairment ceases to be indicated.",
    "The increase in their credit risk since initial recognition may become insignificant.",
    "The increase in their credit risk since initial recognition may become significant.",
    "They remain credit-impaired until derecognition."
  ],
  correct: 3
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Impairment, Financing, Associates, and Joint Ventures",
  type: "Theory",
  question: "The unrecoverable portion of a debt instrument is:",
  choices: [
    "Recognized as impairment loss, by decreasing the loss allowance.",
    "Recognized as impairment loss, by increasing the loss allowance.",
    "Written off, by directly reducing the gross carrying amount.",
    "Written off, by proratably reducing the amortized cost."
  ],
  correct: 2
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Impairment, Financing, Associates, and Joint Ventures",
  type: "Theory",
  question: "Indicators of a credit-impaired debt instrument exclude:",
  choices: [
    "Acquisition of debt instrument at a deep discount.",
    "Disappearance of active market for the debt instrument.",
    "Probability of bankruptcy (or financial reorganization) of the issuer (or borrower).",
    "Significant increase in credit risk since initial recognition."
  ],
  correct: 3
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Impairment, Financing, Associates, and Joint Ventures",
  type: "Theory",
  question: "Either the simplified approach or the general approach may be applied to receivables from lessees:",
  choices: [
    "Under a contract not classified as a lease.",
    "Under a finance lease or an operating lease.",
    "Under a finance lease.",
    "Under an operating lease."
  ],
  correct: 1
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Impairment, Financing, Associates, and Joint Ventures",
  type: "Theory",
  question: "These are the criteria for the credit risk on a debt instrument to be deemed low, except:",
  choices: [
    "The borrower‚Äôs capability to pay is not diminished.",
    "The borrower‚Äôs capability to pay is strong.",
    "The credit risk of the entity‚Äôs operating jurisdiction is insignificant.",
    "The risk of default on the debt instrument is low."
  ],
  correct: 2
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Impairment, Financing, Associates, and Joint Ventures",
  type: "Theory",
  question: "The increase in credit risk since initial recognition may be assessed as significant, when:",
  choices: [
    "Credit risk approaches the maximum initial credit risk of similar debt instruments within the portfolio.",
    "Credit risk approximates the maximum initial credit risk of similar debt instruments within the portfolio.",
    "Credit risk equals the maximum initial credit risk of similar debt instruments within the portfolio.",
    "Credit risk exceeds the maximum initial credit risk of similar debt instruments within the portfolio."
  ],
  correct: 3
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Impairment, Financing, Associates, and Joint Ventures",
  type: "Theory",
  question: "Changes in lifetime default risk of a long-term debt instrument must be assessed, when:",
  choices: [
    "Changes in credit-related factors are inconspicuous beyond next 12 months.",
    "Changes in credit-related factors are represented within next 12 months.",
    "Contractual cash flow obligations are insignificant beyond next 12 months.",
    "Contractual cash flow obligations are significant beyond next 12 months."
  ],
  correct: 3
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Impairment, Financing, Associates, and Joint Ventures",
  type: "Theory",
  question: "Which is the use of specific trade receivables, as security for a loan?",
  choices: [
    "Assignment of trade receivables.",
    "Factoring with recourse.",
    "Factoring without recourse.",
    "Pledge of trade receivables."
  ],
  correct: 0
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Impairment, Financing, Associates, and Joint Ventures",
  type: "Theory",
  question: "Which describes the pledge of trade receivables?",
  choices: [
    "It is the sale of specific trade receivables, with obligation to repurchase uncollected portion.",
    "It is the sale of specific trade receivables, without obligation to repurchase uncollected portion.",
    "It is the use of all trade receivables, as security for a loan.",
    "It is the use of specific trade receivables, as security for a loan."
  ],
  correct: 2
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Impairment, Financing, Associates, and Joint Ventures",
  type: "Theory",
  question: "Which describes factoring with recourse?",
  choices: [
    "It is the sale of specific trade receivables, with obligation to repurchase uncollected portion.",
    "It is the sale of specific trade receivables, without obligation to repurchase uncollected portion.",
    "It is the use of all trade receivables, as security for a loan.",
    "It is the use of specific trade receivables, as security for a loan."
  ],
  correct: 0
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Impairment, Financing, Associates, and Joint Ventures",
  type: "Theory",
  question: "Which describes factoring without recourse?",
  choices: [
    "It is the sale of specific trade receivables, with obligation to repurchase uncollected portion.",
    "It is the sale of specific trade receivables, without obligation to repurchase uncollected portion.",
    "It is the use of all trade receivables, as security for a loan.",
    "It is the use of specific trade receivables, as security for a loan."
  ],
  correct: 1
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Impairment, Financing, Associates, and Joint Ventures",
  type: "Theory",
  question: "Which describes assignment of trade receivables?",
  choices: [
    "It is the sale of specific trade receivables, with obligation to repurchase uncollected portion.",
    "It is the sale of specific trade receivables, without obligation to repurchase uncollected portion.",
    "It is the use of all trade receivables, as security for a loan.",
    "It is the use of specific trade receivables, as security for a loan."
  ],
  correct: 3
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Impairment, Financing, Associates, and Joint Ventures",
  type: "Theory",
  question: "Which describes the use of all trade receivables, as security for a loan?",
  choices: [
    "Assignment of trade receivables.",
    "Factoring with recourse.",
    "Factoring without recourse.",
    "Pledge of trade receivables."
  ],
  correct: 3
},
{
  volume: "Volume 1",
  chapter: "Chapter 2",
  topic: "Impairment, Financing, Associates, and Joint Ventures",
  type: "Theory",
  question: "Which describes the use of specific trade receivables, as security for a loan?",
  choices: [
    "Assignment of trade receivables.",
    "Factoring with recourse.",
    "Factoring without recourse.",
    "Pledge of trade receivables."
  ],
  correct: 0
}
      // ‚¨áÔ∏è Insert all future batch questions directly above this line
    ];
    // üîÅ END REPLACEABLE BLOCK: Question Bank

    // üîß DOM Elements
    const volumeDropdown = document.getElementById("volume");
    const chapterDropdown = document.getElementById("chapter");
    const topicDropdown = document.getElementById("topic");
    const typeDropdown = document.getElementById("type");
    const submitBtn = document.getElementById("submitBtn");
    const resetBtn = document.getElementById("resetBtn");
    const questionContainer = document.getElementById("questionContainer");
    const scoreContainer = document.getElementById("scoreContainer");

    // üß© Utility Functions
    const getUnique = (key, filter = {}) => {
      return [...new Set(
        questions
          .filter(q => Object.entries(filter).every(([k, v]) => q[k] === v))
          .map(q => q[key])
      )];
    };

    const buildDropdown = (dropdown, items) => {
      dropdown.innerHTML = "";
      items.forEach(item => {
        const opt = document.createElement("option");
        opt.value = item;
        opt.textContent = item;
        dropdown.appendChild(opt);
      });
    };

    const adjustDropdownWidth = (dropdown) => {
      const tempSpan = document.createElement("span");
      tempSpan.style.visibility = "hidden";
      tempSpan.style.position = "absolute";
      tempSpan.style.whiteSpace = "nowrap";
      document.body.appendChild(tempSpan);

      let maxWidth = 0;
      Array.from(dropdown.options).forEach(opt => {
        tempSpan.textContent = opt.textContent;
        const width = tempSpan.offsetWidth;
        if (width > maxWidth) maxWidth = width;
      });

      document.body.removeChild(tempSpan);
      dropdown.style.width = `${maxWidth + 40}px`;
    };

    const shuffleArray = (arr) => {
      const copy = [...arr];
      for (let i = copy.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [copy[i], copy[j]] = [copy[j], copy[i]];
      }
      return copy;
    };

// üß© Global Placeholder Generator
const placeholder = (text) => {
  const opt = document.createElement("option");
  opt.value = "";
  opt.textContent = text;
  opt.disabled = true;
  opt.selected = true;
  return opt;
};

// üöÄ Initial Load
const initDropdowns = () => {
  const volumes = getUnique("volume");
  volumeDropdown.innerHTML = "";
  volumeDropdown.appendChild(placeholder("Select Volume"));
  volumes.forEach(vol => {
    const opt = document.createElement("option");
    opt.value = vol;
    opt.textContent = vol;
    volumeDropdown.appendChild(opt);
  });
  volumeDropdown.selectedIndex = 0;

  // Clear dependent dropdowns
  chapterDropdown.innerHTML = "";
  topicDropdown.innerHTML = "";
  typeDropdown.innerHTML = "";

  // Add placeholder options
  chapterDropdown.appendChild(placeholder("Select Chapter"));
  topicDropdown.appendChild(placeholder("Select Topic"));
  typeDropdown.appendChild(placeholder("Select Type"));
};

// üéØ Volume Listener
volumeDropdown.addEventListener("change", () => {
  const vol = volumeDropdown.value;
  if (!vol) return;

  const chapters = getUnique("chapter", { volume: vol });
  buildDropdown(chapterDropdown, chapters);
  chapterDropdown.insertBefore(placeholder("Select Chapter"), chapterDropdown.firstChild);
  chapterDropdown.selectedIndex = 0;

  topicDropdown.innerHTML = "";
  topicDropdown.appendChild(placeholder("Select Topic"));

  typeDropdown.innerHTML = "";
  typeDropdown.appendChild(placeholder("Select Type"));
});

// üéØ Chapter Listener
chapterDropdown.addEventListener("change", () => {
  const vol = volumeDropdown.value;
  const chap = chapterDropdown.value;
  if (!chap) return;

  const topics = getUnique("topic", { volume: vol, chapter: chap });
  buildDropdown(topicDropdown, topics);
  adjustDropdownWidth(topicDropdown);
  topicDropdown.insertBefore(placeholder("Select Topic"), topicDropdown.firstChild);
  topicDropdown.selectedIndex = 0;

  typeDropdown.innerHTML = "";
  typeDropdown.appendChild(placeholder("Select Type"));
});

// üéØ Topic Listener
topicDropdown.addEventListener("change", () => {
  const vol = volumeDropdown.value;
  const chap = chapterDropdown.value;
  const topic = topicDropdown.value;
  if (!topic) return;

  const types = getUnique("type", { volume: vol, chapter: chap, topic: topic });
  const typeOptions = [...types];
  if (types.includes("Theory") && types.includes("Practice")) {
    typeOptions.push("Both");
  }
  buildDropdown(typeDropdown, typeOptions);
  typeDropdown.insertBefore(placeholder("Select Type"), typeDropdown.firstChild);
  typeDropdown.selectedIndex = 0;
});

// üß† Quiz Renderer with Temporary Session Override
// üöß TEMPORARY OVERRIDE for testing session-dependent logic
const storageToken = "test-token";
const storageSession = "test-session";
const storageExpiresAt = Date.now() + 3600000; // 1 hour from now

submitBtn.addEventListener("click", () => {

  const vol = volumeDropdown.value;
  const chap = chapterDropdown.value;
  const topic = topicDropdown.value;
  const type = typeDropdown.value;

  // üö´ Guard against incomplete selections
  if (!vol || !chap || !topic || !type) {
    questionContainer.innerHTML = "<p>‚ö†Ô∏è Please select all filters before submitting.</p>";
    scoreContainer.innerHTML = "";
    return;
  }

  console.log("Selected Volume:", vol);
  console.log("Selected Chapter:", chap);
  console.log("Selected Topic:", topic);
  console.log("Selected Type:", type);
  console.log("Total Questions:", questions.length);

  let filtered = questions.filter(q =>
    q.volume === vol &&
    q.chapter === chap &&
    q.topic === topic &&
    (type === "Both" || q.type === type)
  );

  console.log("Filtered Questions:", filtered);

      if (filtered.length === 0) {
        questionContainer.innerHTML = "<p>‚ö†Ô∏è No questions found for this selection.</p>";
        scoreContainer.innerHTML = "";
        return;
      }

      filtered = shuffleArray(filtered); // üîÄ Shuffle before rendering

      questionContainer.innerHTML = "";
      scoreContainer.innerHTML = "";

      let score = 0;

      filtered.forEach((q, index) => {
        const wrapper = document.createElement("div");
        wrapper.className = "question-block";

        const qText = document.createElement("p");
        qText.innerHTML = `<strong>Q${index + 1}:</strong> ${q.question}`;
        wrapper.appendChild(qText);

        if (q.type === "Practice" && q.imageQuestion) {
          const imgQ = document.createElement("img");
          imgQ.src = q.imageQuestion;
          imgQ.alt = "Practice Question Image";
          imgQ.className = "excel-image";
          wrapper.appendChild(imgQ);
        }

        const choiceList = document.createElement("ul");
        q.choices.forEach((choice, i) => {
          const li = document.createElement("li");
          const radio = document.createElement("input");
          radio.type = "radio";
          radio.name = `q${index}`;
          radio.value = i;
          li.appendChild(radio);
          li.appendChild(document.createTextNode(" " + choice));
          choiceList.appendChild(li);
        });
        wrapper.appendChild(choiceList);

        const answerDiv = document.createElement("div");
        answerDiv.className = "answer-block";
        answerDiv.style.display = "none";

        const correctText = document.createElement("p");
        correctText.textContent = `‚úÖ Correct Answer: ${q.choices[q.correct]}`;
        answerDiv.appendChild(correctText);

        if (q.type === "Practice" && q.imageAnswer) {
          const imgA = document.createElement("img");
          imgA.src = q.imageAnswer;
          imgA.alt = "Practice Answer Image";
          imgA.className = "excel-image";
          answerDiv.appendChild(imgA);
        }

        wrapper.appendChild(answerDiv);
        questionContainer.appendChild(wrapper);
      });

      // üßÆ Score Calculation
      const radios = document.querySelectorAll("input[type='radio']:checked");
      radios.forEach(radio => {
        const qIndex = parseInt(radio.name.replace("q", ""));
        if (parseInt(radio.value) === filtered[qIndex].correct) score++;
      });

      const percentage = ((score / filtered.length) * 100).toFixed(2);
      scoreContainer.innerHTML = `
        <p>üéØ Raw Score: ${score} / ${filtered.length}</p>
        <p>üìä Percentage: ${percentage}%</p>
      `;

      // ‚úÖ Reveal answers
      document.querySelectorAll(".answer-block").forEach(div => {
        div.style.display = "block";
      });
    });

// üîÅ Reset Logic with Full Dropdown Restoration
resetBtn.addEventListener("click", () => {
  questionContainer.innerHTML = "Please select filters and click Submit.";
  scoreContainer.innerHTML = "";
  initDropdowns();

  // Reset dropdown selections to placeholders
  volumeDropdown.selectedIndex = 0;

  chapterDropdown.innerHTML = "";
  chapterDropdown.appendChild(placeholder("Select Chapter"));

  topicDropdown.innerHTML = "";
  topicDropdown.appendChild(placeholder("Select Topic"));

  typeDropdown.innerHTML = "";
  typeDropdown.appendChild(placeholder("Select Type"));
});

// üß≠ Initialize on Load
window.addEventListener("DOMContentLoaded", () => {
  initDropdowns();
});

  </script>
</body>
</html>
