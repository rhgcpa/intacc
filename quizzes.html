<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quizzes</title>
  <link rel="stylesheet" href="style.css" />
  <script defer src="quizzes.js"></script>
</head>
<body>
  <header class="sticky-header">
    <nav class="tab-bar">
      <button onclick="navigateTo('home')">Home</button>
      <button onclick="navigateTo('glossary')">Glossary</button>
      <button onclick="navigateTo('quizzes')">Quizzes</button>
      <button onclick="navigateTo('references')">References</button>
      <button onclick="navigateTo('visuals')">Visuals</button>
      <button onclick="navigateTo('tools')">Tools</button>
    </nav>
    <div class="dropdowns">
      <select id="volumeSelect" onchange="updateChapters()">
        <option value="">Select Volume</option>
      </select>
      <select id="chapterSelect" onchange="updateTopics()">
        <option value="">Select Chapter</option>
      </select>
      <select id="topicSelect" onchange="updateTypes()">
        <option value="">Select Topic</option>
      </select>
      <select id="typeSelect" onchange="loadQuestions()">
        <option value="">Select Type</option>
      </select>
      <button onclick="submitAnswers()">Submit</button>
      <button onclick="resetQuiz()">Reset</button>
    </div>
  </header>

  <main id="quizContainer">
    <!-- Questions will be dynamically injected here -->
  </main>

  <section id="results" class="hidden">
    <p>Raw Score: <span id="rawScore">0</span></p>
    <p>Percentage: <span id="percentageScore">0%</span></p>
  </section>

  <template id="theoryTemplate">
    <div class="question-block">
      <p class="question-text">[Theory Question Placeholder]</p>
      <ul class="choices">
        <li><input type="radio" name="q" value="A" /> A. [Choice A]</li>
        <li><input type="radio" name="q" value="B" /> B. [Choice B]</li>
        <li><input type="radio" name="q" value="C" /> C. [Choice C]</li>
        <li><input type="radio" name="q" value="D" /> D. [Choice D]</li>
      </ul>
      <p class="correct-answer hidden">Correct Answer: [Correct Choice]</p>
    </div>
  </template>

  <template id="practiceTemplate">
    <div class="question-block">
      <p class="question-text">[Practice Question Placeholder]</p>
      <img src="[ExcelQuestionImage.png]" alt="Practice Question Image" class="excel-image" />
      <ul class="choices">
        <li><input type="radio" name="q" value="A" /> A. [Choice A]</li>
        <li><input type="radio" name="q" value="B" /> B. [Choice B]</li>
        <li><input type="radio" name="q" value="C" /> C. [Choice C]</li>
        <li><input type="radio" name="q" value="D" /> D. [Choice D]</li>
      </ul>
      <p class="correct-answer hidden">Correct Answer: [Correct Choice]</p>
      <img src="[ExcelAnswerImage.png]" alt="Practice Answer Image" class="excel-image hidden" />
    </div>
  </template>

  <script>
    // âœ… Modular data structure for easy expansion
    const quizData = {
      "1": {
        chapters: {
          "1": { topics: { "1": ["Theory", "Practice", "Both"] } },
          "2": { topics: { "1": ["Theory"], "2": ["Both"], "3": ["Both"], "4": ["Theory"] } }
        }
      },
      "2": {
        chapters: {
          "1": { topics: { "1": ["Theory"] } },
          "3": { topics: { "1": ["Practice"], "2": ["Both"] } }
        }
      },
      "3": {
        chapters: {
          "2": { topics: { "1": ["Theory"], "2": ["Practice"], "3": ["Both"] } }
        }
      }
    };

    function populateVolumes() {
      const volumeSelect = document.getElementById("volumeSelect");
      volumeSelect.innerHTML = '<option value="">Select Volume</option>';
      Object.keys(quizData).forEach(vol => {
        volumeSelect.innerHTML += `<option value="${vol}">Volume ${vol}</option>`;
      });
    }

    function updateChapters() {
      const volume = document.getElementById("volumeSelect").value;
      const chapterSelect = document.getElementById("chapterSelect");
      chapterSelect.innerHTML = '<option value="">Select Chapter</option>';
      if (quizData[volume]) {
        Object.keys(quizData[volume].chapters).forEach(ch => {
          chapterSelect.innerHTML += `<option value="${ch}">Chapter ${ch}</option>`;
        });
      }
      updateTopics();
    }

    function updateTopics() {
      const volume = document.getElementById("volumeSelect").value;
      const chapter = document.getElementById("chapterSelect").value;
      const topicSelect = document.getElementById("topicSelect");
      topicSelect.innerHTML = '<option value="">Select Topic</option>';
      if (quizData[volume]?.chapters[chapter]) {
        Object.keys(quizData[volume].chapters[chapter].topics).forEach(topic => {
          topicSelect.innerHTML += `<option value="${topic}">Topic ${topic}</option>`;
        });
      }
      updateTypes();
    }

    function updateTypes() {
      const volume = document.getElementById("volumeSelect").value;
      const chapter = document.getElementById("chapterSelect").value;
      const topic = document.getElementById("topicSelect").value;
      const typeSelect = document.getElementById("typeSelect");
      typeSelect.innerHTML = '<option value="">Select Type</option>';
      const types = quizData[volume]?.chapters[chapter]?.topics[topic] || [];
      types.forEach(type => {
        typeSelect.innerHTML += `<option value="${type}">${type}</option>`;
      });
    }

    function loadQuestions() {
      const type = document.getElementById("typeSelect").value;
      const container = document.getElementById("quizContainer");
      container.innerHTML = "";

      if (type === "Theory" || type === "Both") {
        const theory = document.getElementById("theoryTemplate").content.cloneNode(true);
        container.appendChild(theory);
      }

      if (type === "Practice" || type === "Both") {
        const practice = document.getElementById("practiceTemplate").content.cloneNode(true);
        container.appendChild(practice);
      }

      document.getElementById("results").classList.add("hidden");
    }

    function submitAnswers() {
      const rawScore = 1; // Placeholder logic
      const percentage = "100%"; // Placeholder logic
      document.getElementById("rawScore").textContent = rawScore;
      document.getElementById("percentageScore").textContent = percentage;

      document.querySelectorAll(".correct-answer").forEach(el => el.classList.remove("hidden"));
      document.querySelectorAll(".excel-image.hidden").forEach(img => img.classList.remove("hidden"));
      document.getElementById("results").classList.remove("hidden");
    }

    function resetQuiz() {
      document.getElementById("volumeSelect").value = "";
      document.getElementById("chapterSelect").innerHTML = '<option value="">Select Chapter</option>';
      document.getElementById("topicSelect").innerHTML = '<option value="">Select Topic</option>';
      document.getElementById("typeSelect").innerHTML = '<option value="">Select Type</option>';
      document.getElementById("quizContainer").innerHTML = "";
      document.getElementById("results").classList.add("hidden");
      window.scrollTo(0, 0);
    }

    function navigateTo(tabName) {
      const container = document.getElementById("quizContainer");
      container.innerHTML = `<p>Loading ${tabName} content...</p>`;
    }

    // Initialize dropdowns on page load
    window.onload = populateVolumes;
  </script>
</body>
</html>
