<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quizzes</title>
  <link rel="stylesheet" href="style.css" />
  <script defer src="quizzes.js"></script>
</head>
<body>
  <header class="sticky-header">
    <nav class="tab-bar">
      <button onclick="navigateTo('home')">Home</button>
      <button onclick="navigateTo('glossary')">Glossary</button>
      <button onclick="navigateTo('quizzes')">Quizzes</button>
      <button onclick="navigateTo('references')">References</button>
      <button onclick="navigateTo('visuals')">Visuals</button>
      <button onclick="navigateTo('tools')">Tools</button>
    </nav>
    <div class="dropdowns">
      <select id="volumeSelect" onchange="updateChapters()">
        <option value="">Select Volume</option>
        <option value="1">Volume 1</option>
        <option value="2">Volume 2</option>
        <option value="3">Volume 3</option>
      </select>
      <select id="chapterSelect" onchange="updateTopics()">
        <option value="">Select Chapter</option>
      </select>
      <select id="topicSelect" onchange="updateTypes()">
        <option value="">Select Topic</option>
      </select>
      <select id="typeSelect" onchange="loadQuestions()">
        <option value="">Select Type</option>
      </select>
      <button onclick="submitAnswers()">Submit</button>
      <button onclick="resetQuiz()">Reset</button>
    </div>
  </header>

  <main id="quizContainer">
    <!-- Placeholder for dynamically loaded questions -->
  </main>

  <section id="results" class="hidden">
    <p>Raw Score: <span id="rawScore">0</span></p>
    <p>Percentage: <span id="percentageScore">0%</span></p>
  </section>

  <template id="theoryTemplate">
    <div class="question-block">
      <p class="question-text">[Theory Question Placeholder]</p>
      <ul class="choices">
        <li><input type="radio" name="q" value="A" /> A. [Choice A]</li>
        <li><input type="radio" name="q" value="B" /> B. [Choice B]</li>
        <li><input type="radio" name="q" value="C" /> C. [Choice C]</li>
        <li><input type="radio" name="q" value="D" /> D. [Choice D]</li>
      </ul>
      <p class="correct-answer hidden">Correct Answer: [Correct Choice]</p>
    </div>
  </template>

  <template id="practiceTemplate">
    <div class="question-block">
      <p class="question-text">[Practice Question Placeholder]</p>
      <img src="[ExcelQuestionImage.png]" alt="Practice Question Image" class="excel-image" />
      <ul class="choices">
        <li><input type="radio" name="q" value="A" /> A. [Choice A]</li>
        <li><input type="radio" name="q" value="B" /> B. [Choice B]</li>
        <li><input type="radio" name="q" value="C" /> C. [Choice C]</li>
        <li><input type="radio" name="q" value="D" /> D. [Choice D]</li>
      </ul>
      <p class="correct-answer hidden">Correct Answer: [Correct Choice]</p>
      <img src="[ExcelAnswerImage.png]" alt="Practice Answer Image" class="excel-image hidden" />
    </div>
  </template>

  <script>
    // Placeholder logic for dynamic dropdowns
    const volumeData = {
      "1": { chapters: ["1", "2"], topics: { "1": ["1"], "2": ["1", "2", "3", "4"] } },
      "2": { chapters: ["1", "3"], topics: { "1": ["1"], "3": ["1", "2"] } },
      "3": { chapters: ["2"], topics: { "2": ["1", "2", "3"] } }
    };

    function updateChapters() {
      const volume = document.getElementById("volumeSelect").value;
      const chapterSelect = document.getElementById("chapterSelect");
      chapterSelect.innerHTML = '<option value="">Select Chapter</option>';
      if (volumeData[volume]) {
        volumeData[volume].chapters.forEach(ch => {
          chapterSelect.innerHTML += `<option value="${ch}">Chapter ${ch}</option>`;
        });
      }
      updateTopics(); // Reset downstream
    }

    function updateTopics() {
      const volume = document.getElementById("volumeSelect").value;
      const chapter = document.getElementById("chapterSelect").value;
      const topicSelect = document.getElementById("topicSelect");
      topicSelect.innerHTML = '<option value="">Select Topic</option>';
      if (volumeData[volume]?.topics[chapter]) {
        volumeData[volume].topics[chapter].forEach(t => {
          topicSelect.innerHTML += `<option value="${t}">Topic ${t}</option>`;
        });
      }
      updateTypes(); // Reset downstream
    }

    function updateTypes() {
      const topic = document.getElementById("topicSelect").value;
      const typeSelect = document.getElementById("typeSelect");
      typeSelect.innerHTML = '<option value="">Select Type</option>';
      // Placeholder logic: assume Topic 1 and 4 are Theory-only, others are Both
      if (["1", "4"].includes(topic)) {
        typeSelect.innerHTML += `<option value="Theory">Theory</option>`;
      } else {
        typeSelect.innerHTML += `<option value="Theory">Theory</option>`;
        typeSelect.innerHTML += `<option value="Practice">Practice</option>`;
        typeSelect.innerHTML += `<option value="Both">Both</option>`;
      }
    }

    function loadQuestions() {
      const type = document.getElementById("typeSelect").value;
      const container = document.getElementById("quizContainer");
      container.innerHTML = "";

      if (type === "Theory" || type === "Both") {
        const theory = document.getElementById("theoryTemplate").content.cloneNode(true);
        container.appendChild(theory);
      }

      if (type === "Practice" || type === "Both") {
        const practice = document.getElementById("practiceTemplate").content.cloneNode(true);
        container.appendChild(practice);
      }

      document.getElementById("results").classList.add("hidden");
    }

    function submitAnswers() {
      // Placeholder scoring logic
      const rawScore = 1; // Replace with actual logic
      const percentage = "100%"; // Replace with actual logic
      document.getElementById("rawScore").textContent = rawScore;
      document.getElementById("percentageScore").textContent = percentage;

      document.querySelectorAll(".correct-answer").forEach(el => el.classList.remove("hidden"));
      document.querySelectorAll(".excel-image.hidden").forEach(img => img.classList.remove("hidden"));
      document.getElementById("results").classList.remove("hidden");
    }

    function resetQuiz() {
      document.getElementById("volumeSelect").value = "";
      document.getElementById("chapterSelect").innerHTML = '<option value="">Select Chapter</option>';
      document.getElementById("topicSelect").innerHTML = '<option value="">Select Topic</option>';
      document.getElementById("typeSelect").innerHTML = '<option value="">Select Type</option>';
      document.getElementById("quizContainer").innerHTML = "";
      document.getElementById("results").classList.add("hidden");
    }

    function navigateTo(tabName) {
      alert(`Navigating to ${tabName} tab...`); // Placeholder
    }
  </script>
</body>
</html>
